# 7. 클로저(closure)



> __클로저__는 함수와 함수가 선언된 _어휘적 환경_의 __조합__이다.



lexical environment (어휘적 환경) : 선언 당시의 환경에 대한 정보를 담는 객체 (**환경정보**)

=> **스코프**와 밀접한 관련이 있다.

==> 즉. 함수 내부에서 생성한 *데이터*와 그 *유효범위*로 인해 발생하는 

​        특수한 현상/상태라고 할 수 있다.



Scope에서 외부에 정보를 제공할 수 있는 유일한 수단은 **return**이다.

(__최초 선언 시의 정보를 유지__)



### 클로저를 잘쓰면 얻는 효과

* 1) 접근 권한 제어

* 2) 지역변수 보호

* 3) 데이터 보존 및 활용

  ```javascript
  function a() {
  	var x = 1;
  	function b() {
  		console.log(x);
  	}
  	b();
  }
  a();
  console.log(x);
  ```

> 변수 x는 a라는 내부와 b라는 함수 내부에서는 접근 가능하지만, a 함수 외부에서는 접근할 수 없다. 그렇기 때문에 데이터의 보존 및 활용을 제대로 할 수 없다.

```javascript
function a() {
	var x = 1;
	return function b() {
		console.log(x);
	}
}
var c = a();
c();
```

> 여기서는 c 를 통해 a 함수 내부의 값을 얻을 수 있다. 그리고 외부에서 임의로 내부의 데이터를 바꿀 수는 없는 상황이다. 그래서 데이터 보존 및 활용만 가능할 뿐 접근 권한 제어가 이루어지지 않는다.

```javascript
function a() {
	var _x = 1;
	return {
		get x() { return _X; },
		set x(v) { _x = v; }
	}
}
var c = a();
c.x = 10;
```

> 이렇게하면 접근 권한 제어가 가능해 내부 함수의 데이터를 변경할 수 있을 뿐 아니라, 데이터의 보존 및 활용도 가능하다. 게다가 _x 와같은 변수 명을 통해 지역변수의 보호도 가능하다.



스코프는 **정의**될 때 결정된다.

